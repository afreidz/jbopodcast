---
import Layout from "$/layouts/Auth.astro";
import AuthForm from "./_components/form.svelte";

const { redirect, locals, url } = Astro;
const email = url.searchParams.get("email");

if (locals.user) {
  return redirect("/insider/dashboard");
}

export const prerender = false;
---

<Layout class="flex flex-col justify-center items-center">
  <h1 class="text-2xl font-semibold tracking-tight">Welcome</h1>
  <p class="text-muted-foreground text-sm">
    Enter your email/password below to sign-in as an Insider
  </p>
  <form action="/api/auth/signin" method="post" class="mt-10 w-full max-w-sm">
    <AuthForm {email} />
  </form>
</Layout>
